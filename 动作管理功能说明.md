# LinkerHand 动作管理功能说明

## 功能概述

现在程序支持最多20个动作的存储、修改和删除功能，提供完整的动作管理界面。

## 主要功能

### 1. 动作存储
- **最大容量**: 支持存储20个动作
- **存储格式**: YAML配置文件
- **数据内容**: 动作名称 + 关节位置数据

### 2. 动作添加
- 在输入框中输入动作名称
- 点击"添加动作"按钮
- 系统会自动记录当前滑动条位置作为动作数据
- 重复名称检查，防止重复添加

### 3. 动作编辑
- 每个动作按钮下方有"编辑"按钮
- 点击后弹出编辑对话框
- 可以修改动作名称
- 重复名称检查

### 4. 动作删除
- 每个动作按钮下方有"删除"按钮
- 点击后弹出确认对话框
- 确认后永久删除该动作

### 5. 动作执行
- 点击动作按钮执行对应动作
- 自动更新左侧滑动条位置
- 实时控制机械手关节

## 界面布局

### 右侧动作管理面板
```
┌─────────────────────────────────────┐
│ 动作管理 - 左手 L7                   │
│ 当前动作数量: 3/20                   │
├─────────────────────────────────────┤
│ [输入动作名称...] [添加动作]         │
├─────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │ 握拳     │ │ 张开     │ │ bs      │ │
│ │ [编辑]   │ │ [编辑]   │ │ [编辑]   │ │
│ │ [删除]   │ │ [删除]   │ │ [删除]   │ │
│ └─────────┘ └─────────┘ └─────────┘ │
│                                     │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │ 新动作   │ │ 新动作   │ │ 新动作   │ │
│ │ [编辑]   │ │ [编辑]   │ │ [编辑]   │ │
│ │ [删除]   │ │ [删除]   │ │ [删除]   │ │
│ └─────────┘ └─────────┘ └─────────┘ │
└─────────────────────────────────────┘
```

## 使用方法

### 启动程序
```bash
./start_gui.sh
```

### 添加新动作
1. 调整左侧滑动条到期望位置
2. 在右侧输入框中输入动作名称
3. 点击"添加动作"按钮

### 编辑动作
1. 点击动作下方的"编辑"按钮
2. 在弹出的对话框中修改名称
3. 点击"确定"保存

### 删除动作
1. 点击动作下方的"删除"按钮
2. 在确认对话框中点击"是"

### 执行动作
1. 直接点击动作按钮
2. 系统会自动执行对应动作

## 配置文件

动作数据存储在以下配置文件中：
- L7: `LinkerHand/config/L7_positions.yaml`
- L10: `LinkerHand/config/L10_positions.yaml`
- L20: `LinkerHand/config/L20_positions.yaml`
- L21: `LinkerHand/config/L21_positions.yaml`
- L25: `LinkerHand/config/L25_positions.yaml`

## 配置文件格式

```yaml
LEFT_HAND:
- ACTION_NAME: 握拳
  POSITION: [67, 151, 0, 0, 0, 0, 37]
- ACTION_NAME: 张开
  POSITION: [255, 179, 255, 255, 255, 255, 83]

RIGHT_HAND:
- ACTION_NAME: 示例动作
  POSITION: [100, 150, 200, 250, 255, 255, 255]
```

## 注意事项

1. **数量限制**: 最多支持20个动作，达到限制时会显示警告
2. **名称唯一性**: 动作名称必须唯一，重复名称会被拒绝
3. **数据持久化**: 所有操作都会自动保存到配置文件
4. **实时同步**: 删除和编辑操作会立即更新界面和配置文件
5. **错误处理**: 提供友好的错误提示和确认对话框

## 测试功能

运行测试脚本验证功能：
```bash
python test_actions.py
```

## 技术特性

- **响应式布局**: 自动适应不同数量的动作
- **滚动支持**: 动作过多时支持滚动查看
- **信号机制**: 使用PyQt5信号槽机制实现组件通信
- **数据验证**: 输入验证和重复检查
- **用户友好**: 直观的界面和操作反馈 